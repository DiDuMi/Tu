# 🌱 社区种子数据说明

## 概述

本项目提供了完整的社区种子数据，包括用户组、分类、标签和示例内容，确保项目部署后可以正常运行。

## 包含的数据

### 1. 用户组 (UserGroups)

| 用户组 | 权限说明 | 默认组 |
|--------|----------|--------|
| 游客 | 只能浏览公开内容 | ❌ |
| 注册用户 | 可发布内容和评论 | ✅ |
| 月费会员 | 享受更多权限和功能 | ❌ |
| 年费会员 | 享受更多权限和优先支持 | ❌ |
| 终身会员 | 享受所有会员权限 | ❌ |
| 操作员 | 可管理内容和用户 | ❌ |
| 管理员 | 拥有所有权限 | ❌ |

### 2. 分类 (Categories)

#### 首页分类
- **精选推荐** (featured) - 平台推荐的高质量内容
- **近期流出** (latest) - 最新发布的内容
- **往期补档** (archive) - 历史内容或补充资料
- **热门推荐** (trending) - 热门或推荐的内容

#### 普通分类
- **Cosplay** (cosplay) - Cosplay相关内容
- **写真** (photo) - 写真摄影相关内容
- **视频** (video) - 视频内容
- **图集** (gallery) - 图片集合
- **资源分享** (resources) - 各类资源分享
- **讨论交流** (discussion) - 用户讨论和交流

### 3. 标签 (Tags)

包含20个常用标签：
- 内容类型：原创、转载、独家
- 质量标识：高清、4K、热门
- 风格分类：日系、韩系、欧美、国产
- 主题分类：动漫、游戏、影视、古风、现代
- 服装类型：制服、泳装、私房等

### 4. 示例内容

- **欢迎来到兔图社区！** - 社区介绍和特色说明
- **社区使用指南** - 详细的使用教程和规则
- **精选Cosplay作品推荐** - 优秀作品推荐

### 5. 管理员账户

- **邮箱**: admin@tu105.com
- **角色**: 管理员
- **状态**: 已激活
- **用户组**: 管理员组

## 使用方法

### 1. 运行种子数据脚本

```bash
# 生成社区种子数据
npm run seed:community

# 更新"精选内容"为"精选推荐"（如果需要）
npm run update:featured

# 验证种子数据
npm run verify:seed

# 准备部署检查
npm run prepare:deploy
```

### 2. 验证数据

运行脚本后，可以通过以下方式验证数据是否正确生成：

1. **检查用户组**：访问 `/admin/user-groups` 查看用户组列表
2. **检查分类**：访问 `/admin/content/categories` 查看分类列表
3. **检查标签**：访问 `/admin/content/tags` 查看标签列表
4. **检查内容**：访问首页查看示例内容是否显示

### 3. 登录管理后台

使用创建的管理员账户登录：
- 邮箱：admin@tu105.com
- 密码：需要通过NextAuth.js的认证流程设置

## 注意事项

### 1. 数据安全

- 脚本会检查数据是否已存在，避免重复创建
- 不会覆盖现有数据，只会创建缺失的数据
- 可以安全地多次运行

### 2. 权限配置

- 用户组权限已按照项目需求预配置
- 首页分类权限已正确设置
- 管理员拥有所有权限

### 3. 自定义修改

如需修改种子数据，请编辑 `scripts/seed-community-data.ts` 文件：

```typescript
// 修改用户组配置
const userGroups = [
  // 在这里添加或修改用户组
]

// 修改分类配置
const categories = [
  // 在这里添加或修改分类
]

// 修改标签配置
const tags = [
  // 在这里添加或修改标签
]
```

## 故障排除

### 1. 数据库连接错误

确保数据库已正确配置并运行：
```bash
# 检查数据库连接
npx prisma db push
```

### 2. 权限错误

确保有足够的权限创建数据：
```bash
# 重新生成Prisma客户端
npx prisma generate
```

### 3. 重置数据

如需重置所有数据：
```bash
# 重置数据库（谨慎使用）
npx prisma migrate reset
# 重新运行种子数据
npm run seed:community
```

## 可用脚本

| 脚本命令 | 功能说明 |
|----------|----------|
| `npm run seed:community` | 生成完整的社区种子数据 |
| `npm run update:featured` | 更新"精选内容"为"精选推荐" |
| `npm run verify:seed` | 验证种子数据完整性 |
| `npm run prepare:deploy` | 检查项目部署准备状态 |

## 更新日志

- **v1.0.0** - 初始版本，包含基础用户组、分类、标签和示例内容
- **v1.1.0** - 将"精选内容"更新为"精选推荐"，优化权限配置
- **v1.2.0** - 添加验证和部署准备脚本，完善文档

## 支持

如有问题，请查看：
1. 项目文档
2. GitHub Issues
3. 联系开发团队
