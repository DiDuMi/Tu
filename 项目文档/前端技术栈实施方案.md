# å…”å›¾é¡¹ç›®å‰ç«¯æŠ€æœ¯æ ˆå®æ–½æ–¹æ¡ˆ

## ç›®å½•

1. [æŠ€æœ¯æ ˆæ¦‚è¿°](#1-æŠ€æœ¯æ ˆæ¦‚è¿°)
2. [Tailwind CSS](#2-tailwind-css)
3. [ZustandçŠ¶æ€ç®¡ç†](#3-zustandçŠ¶æ€ç®¡ç†)
4. [SWRæ•°æ®è·å–](#4-swræ•°æ®è·å–)
5. [æŠ€æœ¯æ ˆååŒå·¥ä½œ](#5-æŠ€æœ¯æ ˆååŒå·¥ä½œ)
6. [è¿ç§»æŒ‡å—](#6-è¿ç§»æŒ‡å—)
7. [TypeScripté›†æˆ](#7-typescripté›†æˆ)
8. [æœ€ä½³å®è·µ](#8-æœ€ä½³å®è·µ)

## 1. æŠ€æœ¯æ ˆæ¦‚è¿°

å…”å›¾é¡¹ç›®å‰ç«¯æŠ€æœ¯æ ˆé‡‡ç”¨ä»¥ä¸‹æ ¸å¿ƒæŠ€æœ¯ï¼š

- **æ¡†æ¶**: Next.js 14+ (Pages Router)
- **æ ·å¼æ–¹æ¡ˆ**: Tailwind CSSï¼ˆä¸ä½¿ç”¨Ant Designï¼‰
- **çŠ¶æ€ç®¡ç†**: Zustandï¼ˆä¸ä½¿ç”¨React Context APIï¼‰
- **æ•°æ®è·å–**: SWR
- **è®¤è¯**: NextAuth.js v4.24.5ï¼ˆå¿…é¡»ä½¿ç”¨æ­¤ç‰¹å®šç‰ˆæœ¬ï¼‰

è¿™äº›æŠ€æœ¯çš„é€‰æ‹©æ—¨åœ¨æä¾›ç°ä»£åŒ–ã€é«˜æ€§èƒ½ä¸”å¼€å‘ä½“éªŒè‰¯å¥½çš„å‰ç«¯è§£å†³æ–¹æ¡ˆã€‚æˆ‘ä»¬æ˜ç¡®ä½¿ç”¨Pages Routerè€ŒéApp Routerï¼Œä»¥ç¡®ä¿é¡¹ç›®æ¶æ„çš„ä¸€è‡´æ€§å’Œç¨³å®šæ€§ã€‚æ‰€æœ‰ç»„ä»¶åº”ä½¿ç”¨Tailwind CSSæ„å»ºï¼Œä¸åº”ä½¿ç”¨Ant Designç»„ä»¶åº“ã€‚

## 2. Tailwind CSS

### 2.1 Tailwind CSS ç®€ä»‹

Tailwind CSSæ˜¯ä¸€ä¸ªåŠŸèƒ½ç±»ä¼˜å…ˆçš„CSSæ¡†æ¶ï¼Œå®ƒæä¾›äº†ä½çº§å®ç”¨å·¥å…·ç±»ï¼Œå¯ä»¥ç›´æ¥åœ¨HTMLä¸­ç»„åˆä½¿ç”¨ï¼Œå¿«é€Ÿæ„å»ºè‡ªå®šä¹‰è®¾è®¡ï¼Œè€Œæ— éœ€ç¼–å†™CSSã€‚

### 2.2 é…ç½®ä¸å®‰è£…

```bash
# å®‰è£…Tailwind CSS
npm install -D tailwindcss postcss autoprefixer
npx tailwindcss init -p
```

é…ç½®æ–‡ä»¶ç¤ºä¾‹ï¼š

```javascript
// tailwind.config.js
module.exports = {
  content: [
    './pages/**/*.{js,ts,jsx,tsx}',
    './components/**/*.{js,ts,jsx,tsx}',
  ],
  theme: {
    extend: {
      colors: {
        primary: {
          50: '#f0f9ff',
          100: '#e0f2fe',
          200: '#bae6fd',
          300: '#7dd3fc',
          400: '#38bdf8',
          500: '#0ea5e9',
          600: '#0284c7',
          700: '#0369a1',
          800: '#075985',
          900: '#0c4a6e',
          950: '#082f49',
        },
        secondary: {
          // è‡ªå®šä¹‰æ¬¡è¦é¢œè‰²
        },
      },
      fontFamily: {
        sans: ['Inter', 'sans-serif'],
      },
      spacing: {
        // è‡ªå®šä¹‰é—´è·
      },
      borderRadius: {
        // è‡ªå®šä¹‰åœ†è§’
      },
    },
  },
  plugins: [
    require('@tailwindcss/forms'),
    require('@tailwindcss/typography'),
  ],
}
```

### 2.3 ä½¿ç”¨è§„èŒƒ

#### 2.3.1 åŸºæœ¬ä½¿ç”¨

```jsx
// ä½¿ç”¨Tailwind CSSç±»åç›´æ¥åœ¨JSXä¸­åº”ç”¨æ ·å¼
function Button({ children, primary }) {
  return (
    <button
      className={`
        px-4 py-2 rounded-md font-medium focus:outline-none focus:ring-2 focus:ring-offset-2
        ${primary
          ? 'bg-primary-600 text-white hover:bg-primary-700 focus:ring-primary-500'
          : 'bg-gray-200 text-gray-800 hover:bg-gray-300 focus:ring-gray-500'}
      `}
    >
      {children}
    </button>
  );
}
```

#### 2.3.2 å“åº”å¼è®¾è®¡

ä½¿ç”¨Tailwindçš„å“åº”å¼å‰ç¼€ï¼š

```jsx
<div className="w-full md:w-1/2 lg:w-1/3">
  {/* åœ¨å°å±å¹•ä¸Šå æ»¡å®½åº¦ï¼Œä¸­ç­‰å±å¹•å ä¸€åŠï¼Œå¤§å±å¹•å ä¸‰åˆ†ä¹‹ä¸€ */}
</div>
```

#### 2.3.3 ç»„ä»¶æŠ½è±¡

ä¸ºäº†é¿å…é‡å¤çš„Tailwindç±»ç»„åˆï¼Œåº”åˆ›å»ºå¯å¤ç”¨çš„ç»„ä»¶ï¼š

```jsx
// components/ui/Card.tsx
export function Card({ children, className = '' }) {
  return (
    <div className={`bg-white rounded-lg shadow-md p-6 ${className}`}>
      {children}
    </div>
  );
}
```

#### 2.3.4 ä¸»é¢˜ä¸æš—æ¨¡å¼

é…ç½®æš—æ¨¡å¼æ”¯æŒï¼š

```jsx
// ä½¿ç”¨classç­–ç•¥çš„æš—æ¨¡å¼
// tailwind.config.js
module.exports = {
  darkMode: 'class',
  // ...
}

// åœ¨ç»„ä»¶ä¸­ä½¿ç”¨
<div className="bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100">
  æš—æ¨¡å¼é€‚é…çš„å†…å®¹
</div>
```

## 3. ZustandçŠ¶æ€ç®¡ç†

### 3.1 Zustandç®€ä»‹

Zustandæ˜¯ä¸€ä¸ªå°å‹ã€å¿«é€Ÿä¸”å¯æ‰©å±•çš„çŠ¶æ€ç®¡ç†è§£å†³æ–¹æ¡ˆã€‚å®ƒä½¿ç”¨ç®€å•çš„APIï¼Œé‡‡ç”¨é’©å­çš„æ–¹å¼ï¼Œæ— éœ€æ ·æ¿ä»£ç ï¼Œé€‚åˆä¸­å°å‹åº”ç”¨çš„çŠ¶æ€ç®¡ç†ã€‚

### 3.2 å®‰è£…ä¸é…ç½®

```bash
npm install zustand
```

### 3.3 Storeè®¾è®¡æ¨¡å¼

#### 3.3.1 åŸºæœ¬Storeæ¨¡å¼

```typescript
// stores/useUserStore.ts
import { create } from 'zustand';
import { devtools, persist } from 'zustand/middleware';

interface UserState {
  user: User | null;
  isLoading: boolean;
  error: string | null;
  // æ“ä½œ
  login: (credentials: LoginCredentials) => Promise<void>;
  logout: () => void;
  fetchUser: () => Promise<void>;
}

export const useUserStore = create<UserState>()(
  devtools(
    persist(
      (set, get) => ({
        user: null,
        isLoading: false,
        error: null,

        login: async (credentials) => {
          set({ isLoading: true, error: null });
          try {
            const user = await apiClient.login(credentials);
            set({ user, isLoading: false });
          } catch (error) {
            set({ error: error.message, isLoading: false });
          }
        },

        logout: () => {
          apiClient.logout();
          set({ user: null });
        },

        fetchUser: async () => {
          set({ isLoading: true, error: null });
          try {
            const user = await apiClient.getCurrentUser();
            set({ user, isLoading: false });
          } catch (error) {
            set({ error: error.message, isLoading: false });
          }
        },
      }),
      {
        name: 'user-storage', // æŒä¹…åŒ–å­˜å‚¨çš„åç§°
        partialize: (state) => ({ user: state.user }), // åªæŒä¹…åŒ–userå­—æ®µ
      }
    )
  )
);
```

#### 3.3.2 æ¨¡å—åŒ–Storeæ¨¡å¼

å¯¹äºå¤æ‚åº”ç”¨ï¼Œå¯ä»¥å°†Storeåˆ†å‰²æˆå¤šä¸ªæ¨¡å—ï¼š

```typescript
// stores/index.ts
import { create } from 'zustand';
import { userSlice, UserSlice } from './slices/userSlice';
import { uiSlice, UISlice } from './slices/uiSlice';
import { contentSlice, ContentSlice } from './slices/contentSlice';

// ç»„åˆå¤šä¸ªSlice
export type StoreState = UserSlice & UISlice & ContentSlice;

export const useStore = create<StoreState>()((...args) => ({
  ...userSlice(...args),
  ...uiSlice(...args),
  ...contentSlice(...args),
}));
```

### 3.4 ä½¿ç”¨è§„èŒƒ

#### 3.4.1 ç»„ä»¶ä¸­ä½¿ç”¨Store

```jsx
// åœ¨ç»„ä»¶ä¸­ä½¿ç”¨
import { useUserStore } from '@/stores/useUserStore';

function ProfilePage() {
  // åªè®¢é˜…éœ€è¦çš„çŠ¶æ€ï¼Œæé«˜æ€§èƒ½
  const user = useUserStore(state => state.user);
  const logout = useUserStore(state => state.logout);

  if (!user) return <LoginRedirect />;

  return (
    <div>
      <h1>æ¬¢è¿, {user.name}</h1>
      <button onClick={logout}>é€€å‡ºç™»å½•</button>
    </div>
  );
}
```

#### 3.4.2 æœ€ä½³å®è·µ

- çŠ¶æ€åˆ†å‰²ï¼šå°†å…¨å±€çŠ¶æ€åˆ†å‰²æˆå¤šä¸ªç‹¬ç«‹çš„storeæˆ–slice
- é€‰æ‹©æ€§è®¢é˜…ï¼šåªè®¢é˜…ç»„ä»¶éœ€è¦çš„çŠ¶æ€éƒ¨åˆ†
- å¼‚æ­¥æ“ä½œï¼šåœ¨storeä¸­å¤„ç†å¼‚æ­¥æ“ä½œå’Œå‰¯ä½œç”¨
- æŒä¹…åŒ–ï¼šä½¿ç”¨persistä¸­é—´ä»¶æŒä¹…åŒ–å…³é”®çŠ¶æ€
- è°ƒè¯•ï¼šä½¿ç”¨devtoolsä¸­é—´ä»¶ä¾¿äºè°ƒè¯•

## 4. SWRæ•°æ®è·å–

### 4.1 SWRç®€ä»‹

SWRæ˜¯ä¸€ä¸ªç”¨äºæ•°æ®è·å–çš„React Hooksåº“ï¼Œåç§°æ¥è‡ª"stale-while-revalidate"ç¼“å­˜ç­–ç•¥ã€‚å®ƒæä¾›äº†æ•°æ®ç¼“å­˜ã€è‡ªåŠ¨é‡æ–°éªŒè¯ã€ç„¦ç‚¹é‡æ–°è·å–ç­‰åŠŸèƒ½ã€‚

### 4.2 å®‰è£…ä¸é…ç½®

```bash
npm install swr
```

å…¨å±€é…ç½®ï¼š

```jsx
// pages/_app.tsx
import { SWRConfig } from 'swr';

function MyApp({ Component, pageProps }) {
  return (
    <SWRConfig
      value={{
        fetcher: (url) => fetch(url).then(res => res.json()),
        revalidateOnFocus: true,
        revalidateOnReconnect: true,
        refreshInterval: 0, // ç¦ç”¨è‡ªåŠ¨åˆ·æ–°
        shouldRetryOnError: true,
        dedupingInterval: 2000,
      }}
    >
      <Component {...pageProps} />
    </SWRConfig>
  );
}

export default MyApp;
```

### 4.3 ä½¿ç”¨è§„èŒƒ

#### 4.3.1 åŸºæœ¬æ•°æ®è·å–

```jsx
import useSWR from 'swr';

function UserProfile({ userId }) {
  const { data, error, isLoading, mutate } = useSWR(`/api/users/${userId}`);

  if (isLoading) return <div>åŠ è½½ä¸­...</div>;
  if (error) return <div>åŠ è½½å¤±è´¥</div>;

  return (
    <div>
      <h1>{data.name}</h1>
      <button onClick={() => mutate()}>åˆ·æ–°</button>
    </div>
  );
}
```

#### 4.3.2 æ¡ä»¶è·å–

```jsx
// æ¡ä»¶è·å– - åªæœ‰å½“userIdå­˜åœ¨æ—¶æ‰å‘èµ·è¯·æ±‚
const { data } = useSWR(userId ? `/api/users/${userId}` : null);
```

#### 4.3.3 æ•°æ®é¢„åŠ è½½

```jsx
import { unstable_serialize } from 'swr';

// åœ¨getServerSidePropsä¸­é¢„åŠ è½½æ•°æ®
export async function getServerSideProps() {
  const user = await fetchUser(userId);

  return {
    props: {
      fallback: {
        [unstable_serialize(['/api/users', userId])]: user
      }
    }
  };
}

// åœ¨é¡µé¢ç»„ä»¶ä¸­ä½¿ç”¨
function Page({ fallback }) {
  return (
    <SWRConfig value={{ fallback }}>
      <UserProfile />
    </SWRConfig>
  );
}
```

#### 4.3.4 ä¹è§‚æ›´æ–°

```jsx
function TodoList() {
  const { data, mutate } = useSWR('/api/todos');

  async function addTodo(text) {
    // ä¹è§‚æ›´æ–°UI
    const newTodo = { id: Date.now(), text, completed: false };
    const optimisticData = [...data, newTodo];

    // æ›´æ–°æœ¬åœ°æ•°æ®ï¼ŒåŒæ—¶å‘é€APIè¯·æ±‚
    mutate(async () => {
      const addedTodo = await fetch('/api/todos', {
        method: 'POST',
        body: JSON.stringify({ text })
      }).then(res => res.json());

      // è¿”å›æ›´æ–°åçš„æ•°æ®
      return [...data, addedTodo];
    }, {
      optimisticData,
      rollbackOnError: true,
      revalidate: false
    });
  }

  return (/* æ¸²æŸ“åˆ—è¡¨ */);
}
```

## 5. æŠ€æœ¯æ ˆååŒå·¥ä½œ

### 5.1 SWRä¸ZustandååŒ

SWRä¸»è¦è´Ÿè´£æ•°æ®è·å–å’Œç¼“å­˜ï¼Œè€ŒZustandè´Ÿè´£åº”ç”¨çŠ¶æ€ç®¡ç†ã€‚ä¸¤è€…å¯ä»¥ååŒå·¥ä½œï¼š

```typescript
// åœ¨Zustandä¸­ä½¿ç”¨SWRè·å–çš„æ•°æ®
function UserDashboard() {
  // ä½¿ç”¨SWRè·å–æ•°æ®
  const { data: userData } = useSWR('/api/user');

  // ä½¿ç”¨Zustandç®¡ç†UIçŠ¶æ€
  const { sidebarOpen, toggleSidebar } = useUIStore();

  // å½“è·å–åˆ°ç”¨æˆ·æ•°æ®åï¼Œæ›´æ–°Zustand store
  useEffect(() => {
    if (userData) {
      useUserStore.getState().setUser(userData);
    }
  }, [userData]);

  return (/* æ¸²æŸ“UI */);
}
```

### 5.2 Tailwindä¸ç»„ä»¶è®¾è®¡

ä½¿ç”¨Tailwind CSSæ„å»ºUIç»„ä»¶ï¼Œç»“åˆZustandç®¡ç†çŠ¶æ€ï¼š

```jsx
// ä¸€ä¸ªä½¿ç”¨Tailwind CSSæ ·å¼å’ŒZustandçŠ¶æ€çš„ç»„ä»¶
function ThemeToggle() {
  const { darkMode, toggleDarkMode } = useUIStore();

  return (
    <button
      onClick={toggleDarkMode}
      className={`
        p-2 rounded-full focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500
        ${darkMode
          ? 'bg-gray-800 text-yellow-400'
          : 'bg-blue-100 text-blue-800'}
      `}
    >
      {darkMode ? 'ğŸŒ™' : 'â˜€ï¸'}
    </button>
  );
}
```

## 6. Tailwind CSS ç»„ä»¶åº“

### 6.1 åŸºç¡€UIç»„ä»¶åº“

#### 6.1.1 ç»„ä»¶åˆ—è¡¨

ä»¥ä¸‹æ˜¯ä½¿ç”¨Tailwind CSSå®ç°çš„åŸºç¡€UIç»„ä»¶ï¼ˆæ³¨æ„ï¼šä¸ä½¿ç”¨Ant Designç»„ä»¶ï¼‰ï¼š

| ç»„ä»¶åç§° | æè¿° | å®ç°æ–¹å¼ |
|---------|------|---------|
| Button | æŒ‰é’®ç»„ä»¶ | è‡ªå®šä¹‰æŒ‰é’®ç»„ä»¶ + Tailwindç±» |
| Form | è¡¨å•ç»„ä»¶ | HTMLè¡¨å•å…ƒç´  + Tailwindç±» |
| Input | è¾“å…¥æ¡†ç»„ä»¶ | HTML input + Tailwindç±» |
| Select | é€‰æ‹©æ¡†ç»„ä»¶ | HTML select + Tailwindç±» |
| Table | è¡¨æ ¼ç»„ä»¶ | è‡ªå®šä¹‰è¡¨æ ¼ç»„ä»¶ + Tailwindç±» |
| Modal | æ¨¡æ€æ¡†ç»„ä»¶ | è‡ªå®šä¹‰æ¨¡æ€æ¡†ç»„ä»¶ + Tailwindç±» |
| Card | å¡ç‰‡ç»„ä»¶ | è‡ªå®šä¹‰å¡ç‰‡ç»„ä»¶ + Tailwindç±» |
| Menu | èœå•ç»„ä»¶ | è‡ªå®šä¹‰èœå•ç»„ä»¶ + Tailwindç±» |
| Layout | å¸ƒå±€ç»„ä»¶ | Flex/Gridå¸ƒå±€ + Tailwindç±» |
| Pagination | åˆ†é¡µç»„ä»¶ | è‡ªå®šä¹‰åˆ†é¡µç»„ä»¶ + Tailwindç±» |

#### 6.1.2 ç»„ä»¶å®ç°ç¤ºä¾‹

1. **å®‰è£…Tailwind CSS**
   ```bash
   npm install -D tailwindcss postcss autoprefixer
   npx tailwindcss init -p
   ```

2. **é…ç½®Tailwind**
   ```js
   // tailwind.config.js
   module.exports = {
     content: [
       './pages/**/*.{js,ts,jsx,tsx}',
       './components/**/*.{js,ts,jsx,tsx}',
     ],
     theme: {
       extend: {
         // è‡ªå®šä¹‰ä¸»é¢˜ï¼Œå¯ä»¥åŒ¹é…åŸAnt Designä¸»é¢˜è‰²
         colors: {
           primary: {
             // è“è‰²ç³»ï¼Œå¯¹åº”Ant Designçš„ä¸»è‰²
             DEFAULT: '#1890ff',
             50: '#e6f7ff',
             100: '#bae7ff',
             200: '#91d5ff',
             300: '#69c0ff',
             400: '#40a9ff',
             500: '#1890ff',
             600: '#096dd9',
             700: '#0050b3',
             800: '#003a8c',
             900: '#002766',
           },
           // å…¶ä»–é¢œè‰²...
         },
       },
     },
     plugins: [
       require('@tailwindcss/forms'),
     ],
   }
   ```

3. **åˆ›å»ºåŸºç¡€UIç»„ä»¶**

   Buttonç»„ä»¶ç¤ºä¾‹ï¼š
   ```tsx
   // components/ui/Button.tsx
   import React from 'react';

   type ButtonType = 'primary' | 'default' | 'dashed' | 'text' | 'link';
   type ButtonSize = 'small' | 'middle' | 'large';

   interface ButtonProps {
     type?: ButtonType;
     size?: ButtonSize;
     disabled?: boolean;
     loading?: boolean;
     onClick?: () => void;
     className?: string;
     children: React.ReactNode;
   }

   export function Button({
     type = 'default',
     size = 'middle',
     disabled = false,
     loading = false,
     onClick,
     className = '',
     children,
   }: ButtonProps) {
     // åŸºç¡€æ ·å¼
     const baseStyles = 'inline-flex items-center justify-center font-medium rounded-md focus:outline-none transition-colors';

     // ç±»å‹æ ·å¼
     const typeStyles = {
       primary: 'bg-primary-500 text-white hover:bg-primary-600 focus:ring-2 focus:ring-primary-500 focus:ring-offset-2',
       default: 'bg-white text-gray-700 border border-gray-300 hover:text-primary-500 hover:border-primary-500',
       dashed: 'bg-white text-gray-700 border border-dashed border-gray-300 hover:text-primary-500 hover:border-primary-500',
       text: 'bg-transparent text-gray-700 hover:bg-gray-100',
       link: 'bg-transparent text-primary-500 hover:text-primary-600 underline',
     };

     // å°ºå¯¸æ ·å¼
     const sizeStyles = {
       small: 'px-3 py-1 text-sm',
       middle: 'px-4 py-2',
       large: 'px-5 py-3 text-lg',
     };

     // ç¦ç”¨æ ·å¼
     const disabledStyles = disabled ? 'opacity-50 cursor-not-allowed' : 'cursor-pointer';

     return (
       <button
         className={`${baseStyles} ${typeStyles[type]} ${sizeStyles[size]} ${disabledStyles} ${className}`}
         disabled={disabled || loading}
         onClick={onClick}
       >
         {loading && (
           <svg className="w-4 h-4 mr-2 animate-spin" viewBox="0 0 24 24">
             <circle className="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" strokeWidth="4" fill="none" />
             <path className="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z" />
           </svg>
         )}
         {children}
       </button>
     );
   }
   ```

4. **æ›¿æ¢Ant Designç»„ä»¶**

   åŸAnt Designä»£ç ï¼š
   ```tsx
   import { Button, Form, Input } from 'antd';

   function LoginForm() {
     const onFinish = (values) => {
       console.log('Success:', values);
     };

     return (
       <Form
         name="login"
         initialValues={{ remember: true }}
         onFinish={onFinish}
       >
         <Form.Item
           name="username"
           rules={[{ required: true, message: 'è¯·è¾“å…¥ç”¨æˆ·å!' }]}
         >
           <Input placeholder="ç”¨æˆ·å" />
         </Form.Item>

         <Form.Item
           name="password"
           rules={[{ required: true, message: 'è¯·è¾“å…¥å¯†ç !' }]}
         >
           <Input.Password placeholder="å¯†ç " />
         </Form.Item>

         <Form.Item>
           <Button type="primary" htmlType="submit">
             ç™»å½•
           </Button>
         </Form.Item>
       </Form>
     );
   }
   ```

   ä½¿ç”¨Tailwind CSSé‡æ„ï¼š
   ```tsx
   import { useState } from 'react';
   import { Button } from '@/components/ui/Button';

   function LoginForm() {
     const [username, setUsername] = useState('');
     const [password, setPassword] = useState('');
     const [errors, setErrors] = useState<Record<string, string>>({});

     const validate = () => {
       const newErrors: Record<string, string> = {};
       if (!username) newErrors.username = 'è¯·è¾“å…¥ç”¨æˆ·å!';
       if (!password) newErrors.password = 'è¯·è¾“å…¥å¯†ç !';
       setErrors(newErrors);
       return Object.keys(newErrors).length === 0;
     };

     const handleSubmit = (e: React.FormEvent) => {
       e.preventDefault();
       if (validate()) {
         console.log('Success:', { username, password });
       }
     };

     return (
       <form onSubmit={handleSubmit} className="space-y-6">
         <div>
           <label htmlFor="username" className="block text-sm font-medium text-gray-700">
             ç”¨æˆ·å
           </label>
           <input
             id="username"
             type="text"
             value={username}
             onChange={(e) => setUsername(e.target.value)}
             className="block w-full px-3 py-2 mt-1 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500"
             placeholder="ç”¨æˆ·å"
           />
           {errors.username && (
             <p className="mt-1 text-sm text-red-600">{errors.username}</p>
           )}
         </div>

         <div>
           <label htmlFor="password" className="block text-sm font-medium text-gray-700">
             å¯†ç 
           </label>
           <input
             id="password"
             type="password"
             value={password}
             onChange={(e) => setPassword(e.target.value)}
             className="block w-full px-3 py-2 mt-1 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500"
             placeholder="å¯†ç "
           />
           {errors.password && (
             <p className="mt-1 text-sm text-red-600">{errors.password}</p>
           )}
         </div>

         <div>
           <Button type="primary" className="w-full">
             ç™»å½•
           </Button>
         </div>
       </form>
     );
   }
   ```

### 6.2 ä»React Context APIè¿ç§»åˆ°Zustand

#### 6.2.1 è¿ç§»æ­¥éª¤

1. **è¯†åˆ«ç°æœ‰Context**

   åŸContext APIä»£ç ï¼ˆä¸æ¨èä½¿ç”¨ï¼Œåº”è¿ç§»åˆ°Zustandï¼‰ï¼š
   ```tsx
   // contexts/AuthContext.tsx - æ­¤ä»£ç ä»…ä½œä¸ºè¿ç§»å‚è€ƒï¼Œé¡¹ç›®ä¸­åº”ä½¿ç”¨Zustand
   import React, { createContext, useContext, useState, useEffect } from 'react';

   interface User {
     id: string;
     name: string;
     email: string;
     role: string;
   }

   interface AuthContextType {
     user: User | null;
     loading: boolean;
     error: string | null;
     login: (email: string, password: string) => Promise<void>;
     logout: () => void;
   }

   const AuthContext = createContext<AuthContextType | undefined>(undefined);

   export function AuthProvider({ children }: { children: React.ReactNode }) {
     const [user, setUser] = useState<User | null>(null);
     const [loading, setLoading] = useState(true);
     const [error, setError] = useState<string | null>(null);

     useEffect(() => {
       // åˆå§‹åŒ–æ—¶æ£€æŸ¥ç”¨æˆ·çŠ¶æ€
       const checkUserSession = async () => {
         try {
           const response = await fetch('/api/auth/me');
           if (response.ok) {
             const userData = await response.json();
             setUser(userData);
           }
         } catch (err) {
           console.error('Failed to fetch user:', err);
         } finally {
           setLoading(false);
         }
       };

       checkUserSession();
     }, []);

     const login = async (email: string, password: string) => {
       setLoading(true);
       setError(null);
       try {
         const response = await fetch('/api/auth/login', {
           method: 'POST',
           headers: { 'Content-Type': 'application/json' },
           body: JSON.stringify({ email, password }),
         });

         if (!response.ok) {
           const errorData = await response.json();
           throw new Error(errorData.message || 'ç™»å½•å¤±è´¥');
         }

         const userData = await response.json();
         setUser(userData.user);
       } catch (err) {
         setError(err instanceof Error ? err.message : 'ç™»å½•è¿‡ç¨‹ä¸­å‘ç”Ÿé”™è¯¯');
       } finally {
         setLoading(false);
       }
     };

     const logout = async () => {
       try {
         await fetch('/api/auth/logout', { method: 'POST' });
         setUser(null);
       } catch (err) {
         console.error('Logout error:', err);
       }
     };

     return (
       <AuthContext.Provider value={{ user, loading, error, login, logout }}>
         {children}
       </AuthContext.Provider>
     );
   }

   export function useAuth() {
     const context = useContext(AuthContext);
     if (context === undefined) {
       throw new Error('useAuth must be used within an AuthProvider');
     }
     return context;
   }
   ```

2. **åˆ›å»ºZustand Store**

   è¿ç§»åˆ°Zustandï¼š
   ```tsx
   // stores/useAuthStore.ts
   import { create } from 'zustand';
   import { devtools, persist } from 'zustand/middleware';

   interface User {
     id: string;
     name: string;
     email: string;
     role: string;
   }

   interface AuthState {
     user: User | null;
     loading: boolean;
     error: string | null;
     login: (email: string, password: string) => Promise<void>;
     logout: () => Promise<void>;
     checkSession: () => Promise<void>;
   }

   export const useAuthStore = create<AuthState>()(
     devtools(
       persist(
         (set, get) => ({
           user: null,
           loading: false,
           error: null,

           login: async (email, password) => {
             set({ loading: true, error: null });
             try {
               const response = await fetch('/api/auth/login', {
                 method: 'POST',
                 headers: { 'Content-Type': 'application/json' },
                 body: JSON.stringify({ email, password }),
               });

               if (!response.ok) {
                 const errorData = await response.json();
                 throw new Error(errorData.message || 'ç™»å½•å¤±è´¥');
               }

               const userData = await response.json();
               set({ user: userData.user, loading: false });
             } catch (err) {
               set({
                 error: err instanceof Error ? err.message : 'ç™»å½•è¿‡ç¨‹ä¸­å‘ç”Ÿé”™è¯¯',
                 loading: false
               });
             }
           },

           logout: async () => {
             try {
               await fetch('/api/auth/logout', { method: 'POST' });
               set({ user: null });
             } catch (err) {
               console.error('Logout error:', err);
             }
           },

           checkSession: async () => {
             set({ loading: true });
             try {
               const response = await fetch('/api/auth/me');
               if (response.ok) {
                 const userData = await response.json();
                 set({ user: userData, loading: false });
               } else {
                 set({ user: null, loading: false });
               }
             } catch (err) {
               console.error('Failed to fetch user:', err);
               set({ user: null, loading: false });
             }
           },
         }),
         {
           name: 'auth-storage',
           partialize: (state) => ({ user: state.user }),
         }
       )
     )
   );
   ```

3. **æ›´æ–°ç»„ä»¶ä½¿ç”¨**

   åŸContext APIä½¿ç”¨ï¼š
   ```tsx
   import { useAuth } from '@/contexts/AuthContext';

   function ProfilePage() {
     const { user, loading, logout } = useAuth();

     if (loading) return <div>Loading...</div>;
     if (!user) return <div>Please login</div>;

     return (
       <div>
         <h1>Welcome, {user.name}</h1>
         <button onClick={logout}>Logout</button>
       </div>
     );
   }
   ```

   ä½¿ç”¨Zustandï¼š
   ```tsx
   import { useEffect } from 'react';
   import { useAuthStore } from '@/stores/useAuthStore';

   function ProfilePage() {
     // åªè®¢é˜…éœ€è¦çš„çŠ¶æ€ï¼Œæé«˜æ€§èƒ½
     const user = useAuthStore(state => state.user);
     const loading = useAuthStore(state => state.loading);
     const logout = useAuthStore(state => state.logout);
     const checkSession = useAuthStore(state => state.checkSession);

     useEffect(() => {
       // ç»„ä»¶æŒ‚è½½æ—¶æ£€æŸ¥ä¼šè¯
       checkSession();
     }, [checkSession]);

     if (loading) return <div>Loading...</div>;
     if (!user) return <div>Please login</div>;

     return (
       <div>
         <h1>Welcome, {user.name}</h1>
         <button onClick={logout}>Logout</button>
       </div>
     );
   }
   ```

4. **ç§»é™¤Context Provider**

   ä»åº”ç”¨å…¥å£ç‚¹ç§»é™¤Context Providerï¼š
   ```tsx
   // åŸä»£ç  - pages/_app.tsx
   import { AuthProvider } from '@/contexts/AuthContext';

   function MyApp({ Component, pageProps }) {
     return (
       <AuthProvider>
         <Component {...pageProps} />
       </AuthProvider>
     );
   }
   ```

   ç§»é™¤åï¼š
   ```tsx
   // æ–°ä»£ç  - pages/_app.tsx
   function MyApp({ Component, pageProps }) {
     return <Component {...pageProps} />;
   }
   ```

## 7. TypeScripté›†æˆ

### 7.1 Zustandä¸TypeScript

```typescript
// å®šä¹‰ç±»å‹
interface Todo {
  id: number;
  text: string;
  done: boolean;
}

interface TodoState {
  todos: Todo[];
  loading: boolean;
  // æ“ä½œ
  addTodo: (text: string) => void;
  toggleTodo: (id: number) => void;
  removeTodo: (id: number) => void;
  fetchTodos: () => Promise<void>;
}

// åˆ›å»ºç±»å‹å®‰å…¨çš„store
export const useTodoStore = create<TodoState>()((set, get) => ({
  todos: [],
  loading: false,

  addTodo: (text) => {
    const newTodo: Todo = {
      id: Date.now(),
      text,
      done: false,
    };
    set((state) => ({ todos: [...state.todos, newTodo] }));
  },

  toggleTodo: (id) => {
    set((state) => ({
      todos: state.todos.map((todo) =>
        todo.id === id ? { ...todo, done: !todo.done } : todo
      ),
    }));
  },

  removeTodo: (id) => {
    set((state) => ({
      todos: state.todos.filter((todo) => todo.id !== id),
    }));
  },

  fetchTodos: async () => {
    set({ loading: true });
    try {
      const response = await fetch('/api/todos');
      const todos = await response.json();
      set({ todos, loading: false });
    } catch (error) {
      console.error('Failed to fetch todos:', error);
      set({ loading: false });
    }
  },
}));
```

### 7.2 SWRä¸TypeScript

```typescript
import useSWR from 'swr';

// å®šä¹‰å“åº”ç±»å‹
interface User {
  id: string;
  name: string;
  email: string;
}

interface ApiError {
  message: string;
}

// åˆ›å»ºç±»å‹å®‰å…¨çš„SWR Hook
function useUser(id: string | null) {
  const { data, error, isLoading, mutate } = useSWR<User, ApiError>(
    id ? `/api/users/${id}` : null
  );

  return {
    user: data,
    isLoading,
    isError: error,
    mutate,
  };
}

// ä½¿ç”¨
function UserProfile({ userId }: { userId: string }) {
  const { user, isLoading, isError } = useUser(userId);

  if (isLoading) return <div>Loading...</div>;
  if (isError) return <div>Error: {isError.message}</div>;
  if (!user) return <div>User not found</div>;

  return (
    <div>
      <h1>{user.name}</h1>
      <p>{user.email}</p>
    </div>
  );
}
```

### 7.3 Tailwind CSSä¸TypeScript

ä½¿ç”¨ç±»å‹å®‰å…¨çš„Tailwindç±»åï¼š

```typescript
// types/tailwind.d.ts
type TailwindColor =
  | 'primary'
  | 'secondary'
  | 'success'
  | 'danger'
  | 'warning'
  | 'info';

type TailwindShade =
  | '50'
  | '100'
  | '200'
  | '300'
  | '400'
  | '500'
  | '600'
  | '700'
  | '800'
  | '900';

type TailwindSize =
  | 'xs'
  | 'sm'
  | 'md'
  | 'lg'
  | 'xl'
  | '2xl'
  | '3xl'
  | '4xl';

// ç»„ä»¶ä½¿ç”¨ç±»å‹
interface ButtonProps {
  color?: TailwindColor;
  size?: TailwindSize;
  rounded?: boolean;
  children: React.ReactNode;
}

// å®ç°
function Button({
  color = 'primary',
  size = 'md',
  rounded = false,
  children
}: ButtonProps) {
  const colorClasses = {
    primary: 'bg-primary-500 hover:bg-primary-600 text-white',
    secondary: 'bg-secondary-500 hover:bg-secondary-600 text-white',
    success: 'bg-green-500 hover:bg-green-600 text-white',
    danger: 'bg-red-500 hover:bg-red-600 text-white',
    warning: 'bg-yellow-500 hover:bg-yellow-600 text-white',
    info: 'bg-blue-500 hover:bg-blue-600 text-white',
  };

  const sizeClasses = {
    xs: 'px-2 py-1 text-xs',
    sm: 'px-3 py-1.5 text-sm',
    md: 'px-4 py-2 text-base',
    lg: 'px-5 py-2.5 text-lg',
    xl: 'px-6 py-3 text-xl',
    '2xl': 'px-8 py-4 text-2xl',
    '3xl': 'px-10 py-5 text-3xl',
    '4xl': 'px-12 py-6 text-4xl',
  };

  const roundedClass = rounded ? 'rounded-full' : 'rounded-md';

  return (
    <button className={`${colorClasses[color]} ${sizeClasses[size]} ${roundedClass}`}>
      {children}
    </button>
  );
}
```

## 8. æœ€ä½³å®è·µ

### 8.1 æ€§èƒ½ä¼˜åŒ–

- ä½¿ç”¨Zustandçš„é€‰æ‹©æ€§è®¢é˜…é¿å…ä¸å¿…è¦çš„é‡æ¸²æŸ“
- åˆ©ç”¨SWRçš„ç¼“å­˜æœºåˆ¶å‡å°‘ç½‘ç»œè¯·æ±‚
- ä½¿ç”¨Tailwindçš„JITæ¨¡å¼å‡å°‘CSSä½“ç§¯
- å®ç°ç»„ä»¶æ‡’åŠ è½½å’Œä»£ç åˆ†å‰²
- ä¼˜åŒ–å¤§å‹åˆ—è¡¨æ¸²æŸ“ï¼ˆä½¿ç”¨è™šæ‹Ÿæ»šåŠ¨ï¼‰

### 8.2 ä»£ç ç»„ç»‡

- æŒ‰åŠŸèƒ½æ¨¡å—ç»„ç»‡Zustand storeï¼ˆä¸ä½¿ç”¨React Context APIï¼‰
- åˆ›å»ºè‡ªå®šä¹‰SWR hookså°è£…å¸¸ç”¨æ•°æ®è·å–é€»è¾‘
- æ„å»ºTailwindç»„ä»¶åº“ï¼Œç¡®ä¿UIä¸€è‡´æ€§ï¼ˆä¸ä½¿ç”¨Ant Designï¼‰
- ä½¿ç”¨barrelæ–‡ä»¶ï¼ˆindex.tsï¼‰å¯¼å‡ºç»„ä»¶å’Œhooks
- ç¡®ä¿ä½¿ç”¨NextAuth.js v4.24.5ç‰ˆæœ¬è¿›è¡Œè®¤è¯

### 8.3 å¼€å‘å·¥ä½œæµ

- ä½¿ç”¨Storybookå¼€å‘å’Œæµ‹è¯•UIç»„ä»¶
- å®ç°ç«¯åˆ°ç«¯æµ‹è¯•ç¡®ä¿åŠŸèƒ½æ­£å¸¸
- ä½¿ç”¨ESLintå’ŒTypeScriptç¡®ä¿ä»£ç è´¨é‡
- å®æ–½Gitæäº¤è§„èŒƒå’Œè‡ªåŠ¨åŒ–ä»£ç å®¡æŸ¥

### 8.4 æŠ€æœ¯æ ˆä¸€è‡´æ€§

- ç¡®ä¿æ‰€æœ‰ç»„ä»¶ä½¿ç”¨Tailwind CSSæ„å»ºï¼Œä¸ä½¿ç”¨Ant Design
- æ‰€æœ‰çŠ¶æ€ç®¡ç†ä½¿ç”¨Zustandï¼Œä¸ä½¿ç”¨React Context API
- è®¤è¯å¿…é¡»ä½¿ç”¨NextAuth.js v4.24.5ç‰ˆæœ¬
- ä½¿ç”¨Pages Routeræ¶æ„ï¼Œä¸ä½¿ç”¨App Router
