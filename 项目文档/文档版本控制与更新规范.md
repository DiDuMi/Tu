# 兔图项目文档版本控制与更新规范

**版本**: 1.1.0
**最后更新**: 2023-12-15
**维护人**: 技术架构组

## 目录

1. [文档版本控制规范](#1-文档版本控制规范)
2. [文档更新流程](#2-文档更新流程)
3. [文档结构规范](#3-文档结构规范)
4. [文档审核与发布](#4-文档审核与发布)
5. [文档维护责任](#5-文档维护责任)

## 1. 文档版本控制规范

### 1.1 版本号规则

所有项目文档必须遵循语义化版本号规则（SemVer），格式为：`主版本号.次版本号.修订号`

- **主版本号**：当文档进行不兼容的内容变更时递增
- **次版本号**：当文档进行向后兼容的内容添加时递增
- **修订号**：当文档进行向后兼容的问题修正时递增

例如：1.0.0, 1.1.0, 1.1.1

### 1.2 版本信息记录

每个文档必须在文档开头包含以下版本信息：

```markdown
**版本**: x.y.z
**最后更新**: YYYY-MM-DD
**维护人**: 团队/个人名称
```

### 1.3 版本历史记录

每个文档应在文档末尾或单独的附录中维护版本历史记录：

```markdown
## 版本历史

| 版本 | 日期 | 更新内容 | 更新人 |
|-----|------|---------|-------|
| 1.0.0 | 2023-11-01 | 初始版本 | 张三 |
| 1.0.1 | 2023-11-10 | 修正错别字和格式问题 | 李四 |
| 1.1.0 | 2023-11-15 | 添加新章节"最佳实践" | 王五 |
```

## 2. 文档更新流程

### 2.1 更新提议

1. **提出更新需求**：任何团队成员可以提出文档更新需求
2. **创建更新任务**：在项目管理工具中创建文档更新任务
3. **分配责任人**：指定文档更新的负责人

### 2.2 更新实施

1. **创建分支**：从main分支创建文档更新分支（格式：`doc/文档名称-更新描述`）
2. **进行更新**：按照规范进行文档更新
3. **版本递增**：根据更新内容调整文档版本号
4. **更新版本历史**：在版本历史记录中添加新条目

### 2.3 更新提交

文档更新的提交信息应遵循以下格式：

```
docs(文档名称): 更新内容简述

- 详细更新内容1
- 详细更新内容2
- 详细更新内容3

版本: x.y.z
```

## 3. 文档结构规范

### 3.1 基本结构

所有项目文档应包含以下基本结构：

1. **文档标题**：使用一级标题（# 标题）
2. **版本信息**：包含版本号、更新日期和维护人
3. **目录**：使用链接引用各章节
4. **正文内容**：使用二级及以下标题组织
5. **版本历史**：记录文档的更新历史

### 3.2 标题层级

- **一级标题（#）**：文档标题，每个文档只使用一次
- **二级标题（##）**：主要章节
- **三级标题（###）**：章节下的小节
- **四级标题（####）**：小节下的主题
- **五级标题（#####）**：主题下的子主题

### 3.3 文档间引用

为避免内容重复和不一致，我们使用以下引用机制：

1. **直接链接引用**：使用Markdown链接引用权威文档中的相关部分

```markdown
详见[技术要求文档](./技术要求文档.md)
```

2. **章节引用**：对于特定章节的引用，使用锚点

```markdown
详见[技术要求文档 - 代码规范](./技术要求文档.md#2-代码规范)
```

3. **摘要引用**：提供简短摘要，并链接到详细内容

```markdown
项目使用Next.js 14+ (Pages Router)作为前端框架，严格禁止使用App Router。详细技术栈信息请参考[技术要求文档](./技术要求文档.md#1-技术栈规范)。
```

4. **引用说明**：在需要引用详细内容的地方，添加引用说明

```markdown
> **注意**：以下内容引用自[技术要求文档](./技术要求文档.md#1-技术栈规范)，如有差异，以技术要求文档为准。
```

### 3.4 权威文档与引用关系

每种信息应只在一个权威文档中定义，其他文档通过引用方式使用这些信息：

| 信息类型 | 权威文档 | 引用方式 |
|---------|---------|---------|
| 技术栈规范 | [技术要求文档](./技术要求文档.md) | 直接链接或摘要引用 |
| API响应格式 | [API文档](./API文档.md) | 直接链接或引用说明 |
| 系统架构 | [总体实施方案](./总体实施方案.md) | 直接链接或摘要引用 |
| 数据模型 | [数据模型实施方案](./数据模型实施方案.md) | 直接链接或引用说明 |

详细的文档权威性和依赖关系请参考[项目文档结构与导航指南](./项目文档结构与导航指南.md#4-文档权威性与依赖关系)。

## 4. 文档审核与发布

### 4.1 审核流程

1. **自我审核**：文档更新者进行初步审核，确保内容准确、格式正确
2. **同行审核**：至少一名团队成员进行审核，提供反馈
3. **技术负责人审核**：技术负责人进行最终审核，确保内容与项目方向一致

### 4.2 审核标准

- **准确性**：内容是否准确无误
- **完整性**：是否涵盖了必要的信息
- **一致性**：是否与其他文档保持一致
- **清晰性**：是否表述清晰，易于理解
- **格式规范**：是否符合文档格式规范

### 4.3 发布流程

1. **创建Pull Request**：将文档更新分支合并到main分支
2. **CI检查**：通过CI检查文档格式和链接有效性
3. **审核通过**：获得必要的审核批准
4. **合并更新**：合并Pull Request到main分支
5. **通知团队**：通知团队文档已更新

## 5. 文档维护责任

### 5.1 文档所有者

每个文档都应有明确的所有者（个人或团队），负责确保文档的准确性和时效性。

| 文档类别 | 所有者 |
|---------|-------|
| 技术要求文档 | 技术架构组 |
| 前端技术栈实施方案 | 前端架构组 |
| 后端技术栈实施方案 | 后端架构组 |
| 数据模型实施方案 | 数据库架构组 |
| 迁移指南 | 相关技术组 |
| 新手入门指南 | 技术架构组 |

### 5.2 定期审查

所有文档应至少每季度进行一次审查，确保内容保持最新：

1. **审查计划**：制定季度文档审查计划
2. **分配任务**：分配审查任务给相关团队成员
3. **进行审查**：检查文档内容是否需要更新
4. **更新文档**：根据审查结果更新文档
5. **报告结果**：向团队报告审查和更新结果

### 5.3 反馈机制

建立文档反馈机制，收集团队成员对文档的意见和建议：

1. **反馈渠道**：在项目管理工具中创建文档反馈专区
2. **反馈处理**：文档所有者定期处理反馈
3. **反馈跟踪**：跟踪反馈的处理状态
4. **反馈闭环**：向反馈提供者通报处理结果

## 版本历史

| 版本 | 日期 | 更新内容 | 更新人 |
|-----|------|---------|-------|
| 1.0.0 | 2023-11-15 | 初始版本 | 技术架构组 |
| 1.1.0 | 2023-12-15 | 更新版本控制规范，增强文档更新流程 | 技术架构组 |
